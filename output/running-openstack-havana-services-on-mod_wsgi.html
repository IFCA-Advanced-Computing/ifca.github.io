<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Running OpenStack Havana services on mod_wsgi</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->
                
                                <meta property="og:type" content="article"/>
            <meta property="og:title" content="Running OpenStack Havana services on mod_wsgi"/>
            <meta property="og:url" content="./running-openstack-havana-services-on-mod_wsgi.html"/>
            <meta property="og:description" content="This is a short manual explaining how to run the OpenStack services (Nova, Cinder, Keystone, Glance and Ceilometer) behind an Apache HTTP server using mod_wsgi."/>
        
        <!-- Bootstrap -->
            <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css"/>
        <link href="./theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="./theme/css/bootstrap-glyphicons.css" rel="stylesheet">
    <link href="./theme/css/pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>

            <link href="./feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="grid.ifca.es ATOM Feed"/>
        
    </head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="." class="navbar-brand">grid.ifca.es</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav navbar-right">
                                    <li><a href="/">Home</a></li>
                                    <li><a href="/archives.html">Blog</a></li>
                                    <li><a href="http://grid.ifca.es/wiki">Wiki</a></li>
                                    <li><a href="http://support.ifca.es/">Get support</a></li>
                                                                                                </ul>
                    </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->

<div class="container">
    <div class="row">
            <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./running-openstack-havana-services-on-mod_wsgi.html"
                       rel="bookmark"
                       title="Permalink to Running OpenStack Havana services on mod_wsgi">
                        Running OpenStack Havana services on mod_wsgi
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <p>It's been a while since we started deploying our OpenStack services behind
an <a href="http://httpd.apache.org/">Apache HTTPD server</a>, using <code>mod_wsgi</code>. We started
with Keystone, since it was something needed in order to get our
<a href="https://ifca.github.io/keystone-voms/">VOMS Authentication Plugin</a> working, but
afterwards we decided to homogenize our setup and move all the services from
Eventlet to Apache.</p>
<p>All the OpenStack services are WSGI applications, and therefore they can be moved
easily from Eventlet to Apache running in prefork mode. Adam Young (one of the
Keystone core developers) wrote almost two years ago a great article about this:
"<a href="http://adam.younglogic.com/2012/03/keystone-should-move-to-apache-httpd/">Keystone should move to Apache HTTPD</a>".
As you can infer from that article, there are several advantages that overcome de
configuration overhead of this setup. Namely we switched from Eventlet to Apache because
of the following reasons:</p>
<ul>
<li>You can use any of the <a href="http://httpd.apache.org/docs/2.2/howto/auth.html">authentication</a>
 modules that are available for Apache and configure Keystone to use
 <a href="http://docs.openstack.org/developer/keystone/external-auth.html">external authentication</a>.
 We are using this for several modules, but the most important for us is the
 <a href="https://ifca.github.io/keystone-voms/">VOMS Authentication Plugin</a>.</li>
<li>SSL configuration is handled by Apache and not by the OpenStack service itself. Since we
 are using <a href="http://puppetlabs.com/">Puppet</a>  in our deployments we only need to create a
 template and apply it to all of our services, instead of configuring each of the services
 individually.</li>
</ul>
<h2>Nova configuration</h2>
<h2>Keystone configuration</h2>
<h2>Glance configuration</h2>
<h2>Cinder configuration</h2>
<h2>Ceilometer configuration</h2>
                <hr>
                <div class="panel">
                    <div class="panel-body">
                        <footer class="post-info">

    <ul class="list-group list-group-flush">
        <li class="list-group-item nospace">
        <span class="label label-default">By</span>
    <a href="./author/ifca.html"><i class="icon-user"></i>IFCA</a>
            </li>

        <li class="list-group-item nospace">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="icon-calendar"></i>Tue 18 March 2014
    </span>
        </li>

        <li class="list-group-item nospace">
    <span class="label label-default">Category</span>
    <a href="./category/manuals.html">manuals</a>
        </li>

    
    <li class="list-group-item nospace">
<span class="label label-default">Tags</span>
	<a href="./tag/cloud.html">cloud</a>
            /
    	<a href="./tag/openstack.html">OpenStack</a>
    </li>
    </ul>
</footer><!-- /.post-info -->                    </div>
                </div>
            </div>
            <!-- /.entry-content -->
            <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="IFCACluster">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
                    </article>
    </section>
</div>
<div class="col-lg-3 well well-sm" id="sidebar">
    <aside>
    <section>
        <ul class="list-group list-group-flush">

                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Categories</h4></li>
                                    <li class="list-group-item">
                        <a href="./category/manuals.html">
                            <i class="icon-folder-open icon-large"></i>manuals
                        </a>
                    </li>
                                    <li class="list-group-item">
                        <a href="./category/news.html">
                            <i class="icon-folder-open icon-large"></i>news
                        </a>
                    </li>
                
            <li class="list-group-item"><a href="./tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
                            <li class="list-group-item tag-1">
                    <a href="./tag/grid.html">
                        grid
                    </a>
                </li>
                            <li class="list-group-item tag-1">
                    <a href="./tag/cloud.html">
                        cloud
                    </a>
                </li>
                            <li class="list-group-item tag-1">
                    <a href="./tag/user-interface.html">
                        user interface
                    </a>
                </li>
                            <li class="list-group-item tag-2">
                    <a href="./tag/scientific-linux-5.html">
                        Scientific Linux 5
                    </a>
                </li>
                            <li class="list-group-item tag-2">
                    <a href="./tag/openstack.html">
                        OpenStack
                    </a>
                </li>
                            <li class="list-group-item tag-2">
                    <a href="./tag/infrastructure.html">
                        infrastructure
                    </a>
                </li>
                            <li class="list-group-item tag-4">
                    <a href="./tag/shutdown-outage.html">
                        shutdown outage
                    </a>
                </li>
                            <li class="list-group-item tag-4">
                    <a href="./tag/security.html">
                        security
                    </a>
                </li>
                            <li class="list-group-item tag-4">
                    <a href="./tag/shutdown.html">
                        shutdown
                    </a>
                </li>
                            <li class="list-group-item tag-4">
                    <a href="./tag/scientific-linux-6.html">
                        Scientific Linux 6
                    </a>
                </li>
                            <li class="list-group-item tag-4">
                    <a href="./tag/upgrade.html">
                        upgrade
                    </a>
                </li>
            </aside></div>

    </div>
    <div class="row">
        <hr>
        <div class="footer">

<div class="nav navbar-nav">
    <p>Contact: <a href="mailto: grid.admin_AT_ifca.unican.es">grid.admin _AT_ ifca.unican.es</a>
    </p>
    <p>Advanced Computing and e-Science Group<br />
    Instituto de Física de Cantabria<br />
    Edificio Juan Jordá<br />
    Avenida de los Castros, s/n<br />
    E-39005 Santander<br />
    Cantabria, Spain</p>
</div>

<div class="nav navbar-nav navbar-right">
    El Instituto de Física de Cantabria es un Centro Mixto<br />
    del Consejo Superior de Investigaciones Científicas y de 
    <br/ >la Universidad de Cantabria.
</div>
</div>    </div>
</div>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>
</body>
</html>